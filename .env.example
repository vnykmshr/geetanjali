# ==============================================================================
# GEETANJALI CONFIGURATION
# ==============================================================================
# Copy this file to .env and update with your values.
#
# This single .env file is used by:
#   - Docker Compose (all services)
#   - Backend (Python/FastAPI via pydantic-settings)
#   - Frontend (React/Vite - VITE_* variables only)
#
# ==============================================================================
# QUICK START - Choose your mode:
# ==============================================================================
#
#   MOCK MODE (UI development - no API costs, instant responses):
#     USE_MOCK_LLM=true
#
#   ANTHROPIC MODE (production):
#     USE_MOCK_LLM=false
#     LLM_PROVIDER=anthropic
#     ANTHROPIC_API_KEY=sk-ant-...
#
#   OLLAMA MODE (local LLM):
#     USE_MOCK_LLM=false
#     LLM_PROVIDER=ollama
#     OLLAMA_ENABLED=true
#
# ==============================================================================


# ------------------------------------------------------------------------------
# DATABASE
# ------------------------------------------------------------------------------
# Docker Compose uses POSTGRES_* variables
POSTGRES_DB=geetanjali
POSTGRES_USER=geetanjali
POSTGRES_PASSWORD=geetanjali_dev_pass

# Backend uses DATABASE_URL (localhost for local dev, postgres for Docker)
DATABASE_URL=postgresql://geetanjali:geetanjali_dev_pass@localhost:5432/geetanjali


# ------------------------------------------------------------------------------
# LLM PROVIDER
# ------------------------------------------------------------------------------
# Provider: anthropic | ollama
LLM_PROVIDER=anthropic

# Set to true for instant mock responses (recommended for UI development)
USE_MOCK_LLM=true

# Enable fallback to secondary provider on failure
LLM_FALLBACK_ENABLED=false


# ------------------------------------------------------------------------------
# ANTHROPIC (Claude)
# ------------------------------------------------------------------------------
# Get API key: https://console.anthropic.com/
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-5-haiku-20241022
ANTHROPIC_MAX_TOKENS=2048
ANTHROPIC_TIMEOUT=30


# ------------------------------------------------------------------------------
# OLLAMA (Local LLM)
# ------------------------------------------------------------------------------
OLLAMA_ENABLED=false
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2:3b
OLLAMA_TIMEOUT=120
OLLAMA_MAX_TOKENS=512
# Note: For Docker, use http://host.docker.internal:11434


# ------------------------------------------------------------------------------
# VECTOR DATABASE (ChromaDB)
# ------------------------------------------------------------------------------
CHROMA_HOST=
CHROMA_PORT=8000
CHROMA_PERSIST_DIRECTORY=./chroma_data
CHROMA_COLLECTION_NAME=gita_verses


# ------------------------------------------------------------------------------
# EMBEDDINGS
# ------------------------------------------------------------------------------
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384


# ------------------------------------------------------------------------------
# RAG PIPELINE
# ------------------------------------------------------------------------------
RAG_TOP_K_VERSES=5
RAG_TOP_M_COMMENTARIES=3
RAG_CONFIDENCE_THRESHOLD=0.7
RAG_SCHOLAR_REVIEW_THRESHOLD=0.6


# ------------------------------------------------------------------------------
# APPLICATION
# ------------------------------------------------------------------------------
APP_ENV=development
DEBUG=true
LOG_LEVEL=INFO


# ------------------------------------------------------------------------------
# API
# ------------------------------------------------------------------------------
API_V1_PREFIX=/api/v1
CORS_ORIGINS=http://localhost,http://localhost:3000,http://localhost:5173,http://127.0.0.1,http://127.0.0.1:3000,http://127.0.0.1:5173
ANALYZE_RATE_LIMIT=10/hour


# ------------------------------------------------------------------------------
# SECURITY (generate secure values for production)
# ------------------------------------------------------------------------------
# Generate: python -c "import secrets; print(secrets.token_hex(32))"

# JWT for user authentication
JWT_SECRET=dev-secret-key-change-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080
REFRESH_TOKEN_EXPIRE_DAYS=90

# Cookie security (set true in production, requires HTTPS)
COOKIE_SECURE=false

# Admin API key for protected endpoints (/admin/ingest, /admin/sync-featured)
API_KEY=dev-api-key-12345


# ------------------------------------------------------------------------------
# EMAIL (Resend) - for contact form
# ------------------------------------------------------------------------------
# Get API key: https://resend.com/
RESEND_API_KEY=
CONTACT_EMAIL_TO=your-email@example.com
CONTACT_EMAIL_FROM=Geetanjali <noreply@yourdomain.com>


# ------------------------------------------------------------------------------
# FRONTEND (Vite - only VITE_* variables are exposed to browser)
# ------------------------------------------------------------------------------
VITE_API_URL=http://localhost:8000
VITE_API_V1_PREFIX=/api/v1


# ==============================================================================
# PRODUCTION CHECKLIST
# ==============================================================================
# Before deploying to production, ensure:
#
# 1. [ ] Generate secure secrets:
#        python -c "import secrets; print(secrets.token_hex(32))"
#        - Set JWT_SECRET to generated value
#        - Set API_KEY to generated value
#        - Set POSTGRES_PASSWORD to secure password
#
# 2. [ ] Configure LLM:
#        - Set USE_MOCK_LLM=false
#        - Set ANTHROPIC_API_KEY if using Claude
#        - Or configure Ollama with appropriate model
#
# 3. [ ] Set production values:
#        - APP_ENV=production
#        - DEBUG=false
#        - COOKIE_SECURE=true (requires HTTPS)
#        - LOG_LEVEL=WARNING
#
# 4. [ ] Configure CORS_ORIGINS with your domain(s)
#
# 5. [ ] Configure email (optional but recommended):
#        - Set RESEND_API_KEY from https://resend.com/
#        - Set CONTACT_EMAIL_TO to your support email
#        - Set CONTACT_EMAIL_FROM with your domain
#
# 6. [ ] Use docker-compose.prod.yml:
#        docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d
