# Geetanjali Backend Configuration
# Copy this file to .env and update with your values

# ============================================================================
# QUICK START - Choose your mode:
# ============================================================================
#
# 1. MOCK MODE (Recommended for UI development - no API costs):
#    USE_MOCK_LLM=true
#    OLLAMA_ENABLED=false
#    ANTHROPIC_API_KEY=
#
# 2. ANTHROPIC MODE (Production - requires API key):
#    USE_MOCK_LLM=false
#    LLM_PROVIDER=anthropic
#    ANTHROPIC_API_KEY=your_actual_api_key
#    OLLAMA_ENABLED=false
#
# 3. OLLAMA MODE (Local LLM - requires Ollama running):
#    USE_MOCK_LLM=false
#    LLM_PROVIDER=ollama
#    OLLAMA_ENABLED=true
#    ANTHROPIC_API_KEY=
#
# 4. HYBRID MODE (Anthropic primary, Ollama fallback):
#    USE_MOCK_LLM=false
#    LLM_PROVIDER=anthropic
#    LLM_FALLBACK_ENABLED=true
#    ANTHROPIC_API_KEY=your_actual_api_key
#    OLLAMA_ENABLED=true
# ============================================================================

# ============================================================================
# DATABASE (PostgreSQL)
# ============================================================================
DATABASE_URL=postgresql://geetanjali:geetanjali_dev_pass@localhost:5432/geetanjali

# ============================================================================
# LLM CONFIGURATION
# ============================================================================
# Primary provider: anthropic, ollama, or mock
LLM_PROVIDER=anthropic
LLM_FALLBACK_ENABLED=true

# Use mock LLM for testing (overrides all other LLM settings)
# Set to true for instant responses without external API calls - RECOMMENDED for dev
USE_MOCK_LLM=true

# ============================================================================
# ANTHROPIC (Claude) - Get API key from https://console.anthropic.com/
# ============================================================================
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-3-5-haiku-20241022
ANTHROPIC_MAX_TOKENS=2048
ANTHROPIC_TIMEOUT=30

# ============================================================================
# OLLAMA (Local LLM - Fallback)
# ============================================================================
# Set to true if you want to use Ollama (requires Ollama running locally)
OLLAMA_ENABLED=false
# For local dev: http://localhost:11434
# For Docker: http://host.docker.internal:11434
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2:3b
OLLAMA_TIMEOUT=120
OLLAMA_MAX_TOKENS=512

# ============================================================================
# VECTOR DATABASE (ChromaDB)
# ============================================================================
# Leave empty for local ChromaDB
CHROMA_HOST=
CHROMA_PORT=8000
CHROMA_PERSIST_DIRECTORY=./chroma_data
CHROMA_COLLECTION_NAME=gita_verses

# ============================================================================
# RAG PIPELINE
# ============================================================================
RAG_TOP_K_VERSES=5
RAG_TOP_M_COMMENTARIES=3
RAG_CONFIDENCE_THRESHOLD=0.7
RAG_SCHOLAR_REVIEW_THRESHOLD=0.6

# ============================================================================
# APPLICATION
# ============================================================================
APP_ENV=development
DEBUG=true
LOG_LEVEL=INFO

# ============================================================================
# API SETTINGS
# ============================================================================
API_V1_PREFIX=/api/v1
CORS_ORIGINS=http://localhost,http://localhost:3000,http://localhost:5173,http://127.0.0.1,http://127.0.0.1:3000,http://127.0.0.1:5173
ANALYZE_RATE_LIMIT=10/hour

# ============================================================================
# AUTHENTICATION / JWT
# ============================================================================
JWT_SECRET=dev-secret-key-change-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080  # 7 days
REFRESH_TOKEN_EXPIRE_DAYS=90

# ============================================================================
# EMBEDDINGS
# ============================================================================
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384
